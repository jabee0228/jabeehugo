<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DDPM paper notes | Jabee's Blog</title>
<meta name=keywords content="ç§‘æŠ€,Diffusion Model,å­¸ç¿’"><meta name=description content="é€™ç¯‡ä¸»è¦æ˜¯åƒè€ƒææ•™æˆçš„å½±ç‰‡ï¼Œä»¥åŠç¶²è·¯ä¸Šçš„æ–‡ç« ï¼Œæ•´ç†çš„ç­†è¨˜ã€‚
Algorithm 1: Training

ç¬¬ 1 è¡Œï¼šrepeat

ä½œç”¨ï¼š é–‹å§‹ä¸€å€‹è¿­ä»£è¨“ç·´éç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ–‚


ç¬¬ 2 è¡Œ

ä½œç”¨ï¼š å¾æ•¸æ“šåˆ†ä½ˆ ä¸­å–ä¸€å€‹æ¨£æœ¬ (x0)ï¼ˆå³å¾è¨“ç·´æ•¸æ“šé›†ä¸­æŠ½å–ä¸€å€‹æ•¸æ“šé»ï¼‰ã€‚

x0 ä»£è¡¨ clean Imageã€‚
q(x0)ï¼š æ•¸æ“šåˆ†ä½ˆï¼Œå³è¨“ç·´é›†ä¸­æ•¸æ“šçš„çœŸå¯¦åˆ†ä½ˆã€‚




ç¬¬ 3 è¡Œ

ä½œç”¨ï¼š éš¨æ©Ÿé¸æ“‡ä¸€å€‹æ™‚é–“tã€‚


ç¬¬ 4 è¡Œ

ä½œç”¨ï¼š å–ä¸€å€‹éš¨æ©Ÿå™ªè²æ¨£æœ¬ ã€‚

è§£é‡‹ï¼š

æ“´æ•£éç¨‹ä¸­ï¼Œæ•¸æ“šæœƒé€æ­¥è¢«åŠ ä¸Šå™ªè²ï¼Œæœ€çµ‚è®Šæˆå®Œå…¨éš¨æ©Ÿçš„é«˜æ–¯å™ªè²ã€‚
åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œéœ€è¦ç”¨éš¨æ©Ÿå™ªè²æ¨¡æ“¬é€™å€‹æ“´æ•£éç¨‹ã€‚






ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–°
âˆ‡_Î¸ â€–Îµ âˆ’ Îµ_Î¸(âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ, t)â€–Â²

ç´°ç¯€è§£é‡‹ï¼š


Îµ ç‚ºåŸå§‹å™ªè²"><meta name=author content="Jabeeå§œ"><link rel=canonical href=https://jabeehugo.netlify.app/notes/241226/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ea3b7061882cb70d3c274ff8f63a3c4454c649ac242160a1181af4ca7fd5eef3.css integrity="sha256-6jtwYYgstw08J0/49jo8RFTGSawkIWChGBr0yn/V7vM=" rel="preload stylesheet" as=style><link rel=icon href=https://jabeehugo.netlify.app/favicon.ico><link rel=apple-touch-icon href=https://jabeehugo.netlify.app/apple-touch-icon.png><link rel=alternate hreflang=en href=https://jabeehugo.netlify.app/notes/241226/><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="DDPM paper notes | Jabee's Blog"><meta name=twitter:description content="é€™ç¯‡ä¸»è¦æ˜¯åƒè€ƒææ•™æˆçš„å½±ç‰‡ï¼Œä»¥åŠç¶²è·¯ä¸Šçš„æ–‡ç« ï¼Œæ•´ç†çš„ç­†è¨˜ã€‚
Algorithm 1: Training

ç¬¬ 1 è¡Œï¼šrepeat

ä½œç”¨ï¼š é–‹å§‹ä¸€å€‹è¿­ä»£è¨“ç·´éç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ–‚


ç¬¬ 2 è¡Œ

ä½œç”¨ï¼š å¾æ•¸æ“šåˆ†ä½ˆ ä¸­å–ä¸€å€‹æ¨£æœ¬ (x0)ï¼ˆå³å¾è¨“ç·´æ•¸æ“šé›†ä¸­æŠ½å–ä¸€å€‹æ•¸æ“šé»ï¼‰ã€‚

x0 ä»£è¡¨ clean Imageã€‚
q(x0)ï¼š æ•¸æ“šåˆ†ä½ˆï¼Œå³è¨“ç·´é›†ä¸­æ•¸æ“šçš„çœŸå¯¦åˆ†ä½ˆã€‚




ç¬¬ 3 è¡Œ

ä½œç”¨ï¼š éš¨æ©Ÿé¸æ“‡ä¸€å€‹æ™‚é–“tã€‚


ç¬¬ 4 è¡Œ

ä½œç”¨ï¼š å–ä¸€å€‹éš¨æ©Ÿå™ªè²æ¨£æœ¬ ã€‚

è§£é‡‹ï¼š

æ“´æ•£éç¨‹ä¸­ï¼Œæ•¸æ“šæœƒé€æ­¥è¢«åŠ ä¸Šå™ªè²ï¼Œæœ€çµ‚è®Šæˆå®Œå…¨éš¨æ©Ÿçš„é«˜æ–¯å™ªè²ã€‚
åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œéœ€è¦ç”¨éš¨æ©Ÿå™ªè²æ¨¡æ“¬é€™å€‹æ“´æ•£éç¨‹ã€‚






ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–°
âˆ‡_Î¸ â€–Îµ âˆ’ Îµ_Î¸(âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ, t)â€–Â²

ç´°ç¯€è§£é‡‹ï¼š


Îµ ç‚ºåŸå§‹å™ªè²"><meta property="og:title" content="DDPM paper notes | Jabee's Blog"><meta property="og:description" content="é€™ç¯‡ä¸»è¦æ˜¯åƒè€ƒææ•™æˆçš„å½±ç‰‡ï¼Œä»¥åŠç¶²è·¯ä¸Šçš„æ–‡ç« ï¼Œæ•´ç†çš„ç­†è¨˜ã€‚
Algorithm 1: Training

ç¬¬ 1 è¡Œï¼šrepeat

ä½œç”¨ï¼š é–‹å§‹ä¸€å€‹è¿­ä»£è¨“ç·´éç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ–‚


ç¬¬ 2 è¡Œ

ä½œç”¨ï¼š å¾æ•¸æ“šåˆ†ä½ˆ ä¸­å–ä¸€å€‹æ¨£æœ¬ (x0)ï¼ˆå³å¾è¨“ç·´æ•¸æ“šé›†ä¸­æŠ½å–ä¸€å€‹æ•¸æ“šé»ï¼‰ã€‚

x0 ä»£è¡¨ clean Imageã€‚
q(x0)ï¼š æ•¸æ“šåˆ†ä½ˆï¼Œå³è¨“ç·´é›†ä¸­æ•¸æ“šçš„çœŸå¯¦åˆ†ä½ˆã€‚




ç¬¬ 3 è¡Œ

ä½œç”¨ï¼š éš¨æ©Ÿé¸æ“‡ä¸€å€‹æ™‚é–“tã€‚


ç¬¬ 4 è¡Œ

ä½œç”¨ï¼š å–ä¸€å€‹éš¨æ©Ÿå™ªè²æ¨£æœ¬ ã€‚

è§£é‡‹ï¼š

æ“´æ•£éç¨‹ä¸­ï¼Œæ•¸æ“šæœƒé€æ­¥è¢«åŠ ä¸Šå™ªè²ï¼Œæœ€çµ‚è®Šæˆå®Œå…¨éš¨æ©Ÿçš„é«˜æ–¯å™ªè²ã€‚
åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œéœ€è¦ç”¨éš¨æ©Ÿå™ªè²æ¨¡æ“¬é€™å€‹æ“´æ•£éç¨‹ã€‚






ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–°
âˆ‡_Î¸ â€–Îµ âˆ’ Îµ_Î¸(âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ, t)â€–Â²

ç´°ç¯€è§£é‡‹ï¼š


Îµ ç‚ºåŸå§‹å™ªè²"><meta property="og:type" content="article"><meta property="og:url" content="https://jabeehugo.netlify.app/notes/241226/"><meta property="og:image" content="https://jabeehugo.netlify.app/notes/241226/images/cover.jpg"><meta property="article:section" content="notes"><meta property="article:published_time" content="2024-12-26T11:41:33+08:00"><meta property="article:modified_time" content="2024-12-26T11:41:33+08:00"><meta property="og:site_name" content="Jabee's Blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://jabeehugo.netlify.app/notes/"},{"@type":"ListItem","position":2,"name":"DDPM paper notes","item":"https://jabeehugo.netlify.app/notes/241226/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"DDPM paper notes | Jabee's Blog","name":"DDPM paper notes","description":"é€™ç¯‡ä¸»è¦æ˜¯åƒè€ƒææ•™æˆçš„å½±ç‰‡ï¼Œä»¥åŠç¶²è·¯ä¸Šçš„æ–‡ç« ï¼Œæ•´ç†çš„ç­†è¨˜ã€‚\nAlgorithm 1: Training ç¬¬ 1 è¡Œï¼šrepeat ä½œç”¨ï¼š é–‹å§‹ä¸€å€‹è¿­ä»£è¨“ç·´éç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ–‚ ç¬¬ 2 è¡Œ ä½œç”¨ï¼š å¾æ•¸æ“šåˆ†ä½ˆ ä¸­å–ä¸€å€‹æ¨£æœ¬ (x0)ï¼ˆå³å¾è¨“ç·´æ•¸æ“šé›†ä¸­æŠ½å–ä¸€å€‹æ•¸æ“šé»ï¼‰ã€‚ x0 ä»£è¡¨ clean Imageã€‚ q(x0)ï¼š æ•¸æ“šåˆ†ä½ˆï¼Œå³è¨“ç·´é›†ä¸­æ•¸æ“šçš„çœŸå¯¦åˆ†ä½ˆã€‚ ç¬¬ 3 è¡Œ ä½œç”¨ï¼š éš¨æ©Ÿé¸æ“‡ä¸€å€‹æ™‚é–“tã€‚ ç¬¬ 4 è¡Œ ä½œç”¨ï¼š å–ä¸€å€‹éš¨æ©Ÿå™ªè²æ¨£æœ¬ ã€‚ è§£é‡‹ï¼š æ“´æ•£éç¨‹ä¸­ï¼Œæ•¸æ“šæœƒé€æ­¥è¢«åŠ ä¸Šå™ªè²ï¼Œæœ€çµ‚è®Šæˆå®Œå…¨éš¨æ©Ÿçš„é«˜æ–¯å™ªè²ã€‚ åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œéœ€è¦ç”¨éš¨æ©Ÿå™ªè²æ¨¡æ“¬é€™å€‹æ“´æ•£éç¨‹ã€‚ ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–° âˆ‡_Î¸ â€–Îµ âˆ’ Îµ_Î¸(âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ, t)â€–Â² ç´°ç¯€è§£é‡‹ï¼š Îµ ç‚ºåŸå§‹å™ªè²\n","keywords":["ç§‘æŠ€","Diffusion Model","å­¸ç¿’"],"wordCount":"2135","inLanguage":"en","image":"https://jabeehugo.netlify.app/notes/241226/images/cover.jpg","datePublished":"2024-12-26T11:41:33+08:00","dateModified":"2024-12-26T11:41:33+08:00","author":{"@type":"Person","name":"Jabeeå§œ"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jabeehugo.netlify.app/notes/241226/"},"publisher":{"@type":"Organization","name":"Jabee's Blog","logo":{"@type":"ImageObject","url":"https://jabeehugo.netlify.app/favicon.ico"}}}</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-notes kind-page layout-" id=top><script src=heatmap.js></script><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://jabeehugo.netlify.app/ accesskey=h title="Jabee's Blog (Alt + H)">Jabee's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jabeehugo.netlify.app/posts/ title=Posts>Posts</a></li><li><a href=https://jabeehugo.netlify.app/notes/ title=Notes class=active>Notes</a></li><li><a href=https://jabeehugo.netlify.app/tags/%E7%A7%91%E6%8A%80/ title=ç§‘æŠ€>ç§‘æŠ€</a></li><li><a href=https://jabeehugo.netlify.app/tags/%E6%97%85%E9%81%8A/ title=æ—…éŠ>æ—…éŠ</a></li><li><a href=https://jabeehugo.netlify.app/about/ title=About>About</a></li><li><a href=https://jabeehugo.netlify.app/archives/ title=Archives>Archives</a></li><li><a href=https://jabeehugo.netlify.app/tags/ title=Tag>Tag</a></li><li><a href=https://jabeehugo.netlify.app/search/ title="search (Alt + /)" data-no-instant accesskey=/>search</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jabeehugo.netlify.app/>Home</a>&nbsp;Â»&nbsp;<a href=https://jabeehugo.netlify.app/notes/>Notes</a></div><h1 class=post-title>DDPM paper notes</h1><div class=post-meta><span class=meta-item><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>
<span>December 26, 2024</span></span><span class=meta-item>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://jabeehugo.netlify.app/tags/%E7%A7%91%E6%8A%80/>ç§‘æŠ€</a><a href=https://jabeehugo.netlify.app/tags/diffusion-model/>Diffusion Model</a><a href=https://jabeehugo.netlify.app/tags/%E5%AD%B8%E7%BF%92/>å­¸ç¿’</a></span></span><span class=meta-item>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg>
<span>2135 words</span></span><span class=meta-item>
<svg width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>5 min</span></span></div></header><figure class=entry-cover><img loading=lazy src=https://jabeehugo.netlify.app/images/cover.jpg alt></figure><div class="toc side right"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#algorithm-1-training aria-label="Algorithm 1: Training">Algorithm 1: Training</a><ul><ul><li><a href=#%e7%ac%ac-1-%e8%a1%8crepeat aria-label="ç¬¬ 1 è¡Œï¼šrepeat"><strong>ç¬¬ 1 è¡Œï¼š<code>repeat</code></strong></a></li><li><a href=#%e7%ac%ac-2-%e8%a1%8c aria-label="ç¬¬ 2 è¡Œ"><strong>ç¬¬ 2 è¡Œ</strong></a></li><li><a href=#%e7%ac%ac-3-%e8%a1%8c aria-label="ç¬¬ 3 è¡Œ"><strong>ç¬¬ 3 è¡Œ</strong></a></li><li><a href=#%e7%ac%ac-4-%e8%a1%8c aria-label="ç¬¬ 4 è¡Œ"><strong>ç¬¬ 4 è¡Œ</strong></a></li><li><a href=#%e7%ac%ac-5-%e8%a1%8c%e6%a2%af%e5%ba%a6%e4%b8%8b%e9%99%8d%e6%9b%b4%e6%96%b0 aria-label="ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–°"><strong>ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–°</strong></a></li><li><a href=#%e7%ac%ac-6-%e8%a1%8cuntil-converged aria-label="ç¬¬ 6 è¡Œï¼šuntil converged"><strong>ç¬¬ 6 è¡Œï¼š<code>until converged</code></strong></a></li></ul></ul></li><li><a href=#algorithm-2-sampling aria-label="Algorithm 2: Sampling">Algorithm 2: Sampling</a><ul><ul><li><a href=#%e7%ac%ac%e4%b8%80%e8%a1%8c-%e7%b5%a6%e8%a8%82%e4%b8%80%e5%80%8b-x-%e5%a4%a7-t-%e7%b4%94%e9%9b%9c%e8%a8%8a%e5%9c%96 aria-label="ç¬¬ä¸€è¡Œ çµ¦è¨‚ä¸€å€‹ X å¤§ T ç´”é›œè¨Šåœ–"><strong>ç¬¬ä¸€è¡Œ çµ¦è¨‚ä¸€å€‹ X å¤§ T ç´”é›œè¨Šåœ–</strong></a></li><li><a href=#%e7%ac%ac%e4%ba%8c%e8%a1%8c-%e8%bf%b4%e5%9c%88%e9%96%8b%e5%a7%8b aria-label="ç¬¬äºŒè¡Œ è¿´åœˆé–‹å§‹"><strong>ç¬¬äºŒè¡Œ è¿´åœˆé–‹å§‹</strong></a></li><li><a href=#%e7%ac%ac%e4%b8%89%e8%a1%8c-%e5%99%aa%e8%81%b2%e6%a2%9d%e4%bb%b6 aria-label="ç¬¬ä¸‰è¡Œ å™ªè²æ¢ä»¶"><strong>ç¬¬ä¸‰è¡Œ å™ªè²æ¢ä»¶</strong></a></li><li><a href=#%e7%ac%ac%e5%9b%9b%e8%a1%8c aria-label=ç¬¬å››è¡Œ><strong>ç¬¬å››è¡Œ</strong></a></li><li><a href=#%e7%ac%ac%e4%ba%94%e8%a1%8c-%e8%bf%b4%e5%9c%88%e7%b5%90%e6%9d%9f aria-label="ç¬¬äº”è¡Œ è¿´åœˆçµæŸ"><strong>ç¬¬äº”è¡Œ è¿´åœˆçµæŸ</strong></a></li><li><a href=#%e7%ac%ac%e5%85%ad%e8%a1%8c-%e6%9c%80%e7%b5%82%e8%bc%b8%e5%87%ba aria-label="ç¬¬å…­è¡Œ æœ€çµ‚è¼¸å‡º"><strong>ç¬¬å…­è¡Œ æœ€çµ‚è¼¸å‡º</strong></a></li></ul></ul></li><li><a href=#maximum-likelihood-estimation aria-label="Maximum Likelihood Estimation">Maximum Likelihood Estimation</a></li><li><a href=#vae-compute-p%ce%b8 aria-label="VAE: Compute pÎ¸">VAE: Compute pÎ¸</a></li><li><a href=#vae-lower-bound-of aria-label="VAE: Lower bound of">VAE: Lower bound of</a></li><li><a href=#ddpm-compute--p%ce%b8x aria-label="DDPM: Compute  pÎ¸(x)">DDPM: Compute pÎ¸(x)</a></li><li><a href=#%e5%96%ae%e5%80%8b-qxt--xt-1-%e7%ae%97%e6%b3%95 aria-label="å–®å€‹ q(XT | XT-1) ç®—æ³•">å–®å€‹ q(XT | XT-1) ç®—æ³•</a></li><li><a href=#%e5%a6%82%e6%9e%9c%e8%a6%81%e7%ae%97%e5%87%ba-qxt--x0 aria-label="å¦‚æœè¦ç®—å‡º q(XT | X0)">å¦‚æœè¦ç®—å‡º q(XT | X0)</a></li><li><a href=#%e5%99%aa%e8%81%b2%e9%a0%90%e6%b8%ac aria-label=å™ªè²é æ¸¬>å™ªè²é æ¸¬</a><ul><li><a href=#%e7%ae%97%e5%87%ba%e4%b8%ad%e9%96%93xt-1%e5%88%b0xt%e7%9a%84%e5%88%86%e4%bd%88-qxt-1--xt-x0 aria-label="ç®—å‡ºä¸­é–“xt-1åˆ°xtçš„åˆ†ä½ˆ q(Xt-1 | Xt, X0)">ç®—å‡ºä¸­é–“xt-1åˆ°xtçš„åˆ†ä½ˆ q(Xt-1 | Xt, X0)</a></li><li><a href=#kl-divergence-between-%e5%90%91%e5%89%8d-and-%e5%90%91%e5%be%8c aria-label="KL Divergence between å‘å‰ and å‘å¾Œ">KL Divergence between å‘å‰ and å‘å¾Œ</a></li></ul></li><li><a href=#sampling-%e9%9a%8e%e6%ae%b5-denoise-function-%e5%8c%96%e7%b0%a1 aria-label="Sampling éšæ®µ Denoise function åŒ–ç°¡">Sampling éšæ®µ Denoise function åŒ–ç°¡</a><ul><ul><li><a href=#ref aria-label=Ref>Ref</a></li></ul></ul></li></ul></div></details></div><div class=post-content><p>é€™ç¯‡ä¸»è¦æ˜¯åƒè€ƒææ•™æˆçš„å½±ç‰‡ï¼Œä»¥åŠç¶²è·¯ä¸Šçš„æ–‡ç« ï¼Œæ•´ç†çš„ç­†è¨˜ã€‚</p><h1 id=algorithm-1-training>Algorithm 1: Training<a hidden class=anchor aria-hidden=true href=#algorithm-1-training>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image.png type alt=image.png></p><h3 id=ç¬¬-1-è¡Œrepeat><strong>ç¬¬ 1 è¡Œï¼š<code>repeat</code></strong><a hidden class=anchor aria-hidden=true href=#ç¬¬-1-è¡Œrepeat>Â¶</a></h3><ul><li><strong>ä½œç”¨ï¼š</strong> é–‹å§‹ä¸€å€‹è¿­ä»£è¨“ç·´éç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ–‚</li></ul><hr><h3 id=ç¬¬-2-è¡Œ><strong>ç¬¬ 2 è¡Œ</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬-2-è¡Œ>Â¶</a></h3><ul><li><strong>ä½œç”¨ï¼š</strong> å¾æ•¸æ“šåˆ†ä½ˆ ä¸­å–ä¸€å€‹æ¨£æœ¬ (x0)ï¼ˆå³å¾è¨“ç·´æ•¸æ“šé›†ä¸­æŠ½å–ä¸€å€‹æ•¸æ“šé»ï¼‰ã€‚<ul><li><strong>x0 ä»£è¡¨ clean Image</strong>ã€‚</li><li><strong>q(x0)ï¼š</strong> æ•¸æ“šåˆ†ä½ˆï¼Œå³è¨“ç·´é›†ä¸­æ•¸æ“šçš„çœŸå¯¦åˆ†ä½ˆã€‚</li></ul></li></ul><hr><h3 id=ç¬¬-3-è¡Œ><strong>ç¬¬ 3 è¡Œ</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬-3-è¡Œ>Â¶</a></h3><ul><li><strong>ä½œç”¨ï¼š</strong> éš¨æ©Ÿé¸æ“‡ä¸€å€‹æ™‚é–“tã€‚</li></ul><hr><h3 id=ç¬¬-4-è¡Œ><strong>ç¬¬ 4 è¡Œ</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬-4-è¡Œ>Â¶</a></h3><ul><li><strong>ä½œç”¨ï¼š</strong> å–ä¸€å€‹éš¨æ©Ÿå™ªè²æ¨£æœ¬ ã€‚<ul><li><strong>è§£é‡‹ï¼š</strong><ul><li>æ“´æ•£éç¨‹ä¸­ï¼Œæ•¸æ“šæœƒé€æ­¥è¢«åŠ ä¸Šå™ªè²ï¼Œæœ€çµ‚è®Šæˆå®Œå…¨éš¨æ©Ÿçš„é«˜æ–¯å™ªè²ã€‚</li><li>åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œéœ€è¦ç”¨éš¨æ©Ÿå™ªè²æ¨¡æ“¬é€™å€‹æ“´æ•£éç¨‹ã€‚</li></ul></li></ul></li></ul><hr><h3 id=ç¬¬-5-è¡Œæ¢¯åº¦ä¸‹é™æ›´æ–°><strong>ç¬¬ 5 è¡Œï¼šæ¢¯åº¦ä¸‹é™æ›´æ–°</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬-5-è¡Œæ¢¯åº¦ä¸‹é™æ›´æ–°>Â¶</a></h3><pre tabindex=0><code>âˆ‡_Î¸ â€–Îµ âˆ’ Îµ_Î¸(âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ, t)â€–Â²
</code></pre><ul><li><strong>ç´°ç¯€è§£é‡‹ï¼š</strong><ul><li><p>Îµ ç‚ºåŸå§‹å™ªè²</p></li><li><p><strong>Îµ_Î¸(âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ, t) é€™ä¸€æ®µåšçš„å‰‡æ˜¯ noise predictorã€‚</strong></p></li><li><p>è€Œ noise predictor æœƒæœ‰ä»¥ä¸‹å…©å€‹ input</p><p><strong>input 1. âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ ; input 2. t ä»£è¡¨ç¬¬å¹¾å€‹å›åˆçš„ å›åˆè¶Šå¾Œé¢ï¼ŒåŠ ä¸Šçš„å™ªè²è¶Šå¤šã€‚</strong></p><p><img loading=lazy src=/notes/241226/DDPM/image1.png type alt=image.png></p></li><li><p><strong>âˆšÎ±Ì„_t x_0 + âˆš(1âˆ’Î±Ì„_t) Îµ ï¼šé€™é‚Š Î±Ì„_t æ˜¯æ ¹æ“š Unuiform å‡ºä¾†çš„ t ï¼Œå¦‚æœ t å€¼è¶Šå¤§ï¼ŒÎ±Ì„_t è¶Šå°ã€‚ Î±Ì„_t è¶Šå°ï¼Œä»£è¡¨åŠ ä¸Šçš„å™ªè²æ¯”ä¾‹å‰‡è¶Šå¤šï¼ˆå³é‚Šä¹˜ä¸Šçš„âˆš(1âˆ’Î±Ì„_t)ï¼‰ã€‚</strong></p></li><li><p><strong>ç›®æ¨™ï¼š</strong> æœ€å°åŒ– ï¼Œå³è®“æ¨¡å‹è¼¸å‡ºçš„å™ªè²èˆ‡å¯¦éš›åŠ å…¥çš„å™ªè²è¶Šæ¥è¿‘è¶Šå¥½ã€‚</p></li><li><p><strong>æ¢¯åº¦ä¸‹é™ï¼š</strong> å°æ¨¡å‹çš„æå¤±å‡½æ•¸é€²è¡Œæ¢¯åº¦ä¸‹é™ï¼Œæ›´æ–°åƒæ•¸ ã€‚åˆ©ç”¨ MSE å¹³å‡å¹³æ–¹å·®æå¤±å»ç®— æ¢¯åº¦ä¸‹é™ç‡ã€‚</p></li></ul></li></ul><hr><h3 id=ç¬¬-6-è¡Œuntil-converged><strong>ç¬¬ 6 è¡Œï¼š<code>until converged</code></strong><a hidden class=anchor aria-hidden=true href=#ç¬¬-6-è¡Œuntil-converged>Â¶</a></h3><ul><li><strong>ä½œç”¨ï¼š</strong> æŒçºŒè¿­ä»£ï¼Œç›´åˆ°æ¨¡å‹è¨“ç·´æ”¶æ–‚ã€‚</li></ul><hr><h1 id=algorithm-2-sampling>Algorithm 2: Sampling<a hidden class=anchor aria-hidden=true href=#algorithm-2-sampling>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image2.png type alt=image.png></p><h3 id=ç¬¬ä¸€è¡Œ-çµ¦è¨‚ä¸€å€‹-x-å¤§-t-ç´”é›œè¨Šåœ–><strong>ç¬¬ä¸€è¡Œ çµ¦è¨‚ä¸€å€‹ X å¤§ T ç´”é›œè¨Šåœ–</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬ä¸€è¡Œ-çµ¦è¨‚ä¸€å€‹-x-å¤§-t-ç´”é›œè¨Šåœ–>Â¶</a></h3><ul><li><strong>æ„ç¾©</strong>ï¼šå¾æ¨™æº–é«˜æ–¯åˆ†ä½ˆï¼ˆå‡å€¼ç‚º 0ï¼Œæ–¹å·®ç‚º 1ï¼‰ä¸­éš¨æ©Ÿç”Ÿæˆä¸€å€‹å™ªè²æ¨£æœ¬ä½œç‚ºèµ·å§‹é»ã€‚</li><li>X å¤§ T ä»£è¡¨çš„æ˜¯ <strong>ç´”é›œè¨Šåœ–</strong></li></ul><hr><h3 id=ç¬¬äºŒè¡Œ-è¿´åœˆé–‹å§‹><strong>ç¬¬äºŒè¡Œ è¿´åœˆé–‹å§‹</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬äºŒè¡Œ-è¿´åœˆé–‹å§‹>Â¶</a></h3><p>å¾ç´”å™ªè²ä¸€è·¯ Sampling åˆ° ç”Ÿæˆåœ–</p><ul><li><strong>æ„ç¾©</strong>ï¼šå¾æ™‚é–“tï¼ˆæœ€ç´”çš„å™ªè²ï¼‰é–‹å§‹ï¼Œé€æ­¥å›æº¯åˆ° ï¼ˆé€æ¼¸å»å™ªç›´åˆ°é‚„åŸå‡ºæ¸…æ™°çš„æ•¸æ“šï¼‰ã€‚</li></ul><hr><h3 id=ç¬¬ä¸‰è¡Œ-å™ªè²æ¢ä»¶><strong>ç¬¬ä¸‰è¡Œ å™ªè²æ¢ä»¶</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬ä¸‰è¡Œ-å™ªè²æ¢ä»¶>Â¶</a></h3><ul><li><strong>æ„ç¾©</strong>ï¼šåœ¨ Sampling éšæ®µï¼Œæœƒåœ¨åšå®Œæ¸›å» Noise predictor å¾Œï¼Œå†åŠ ä¸Š z å™ªè²ï¼ˆè«‹çœ‹ç¬¬å››è¡Œï¼‰<ul><li>ä½†åœ¨ t == 0 æ™‚ï¼Œå·²ç¶“å®Œæˆ Sampling ï¼Œå› æ­¤ä¸å†åŠ ä¸Š z ã€‚</li></ul></li></ul><hr><h3 id=ç¬¬å››è¡Œ><strong>ç¬¬å››è¡Œ</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬å››è¡Œ>Â¶</a></h3><p><img loading=lazy src=/notes/241226/DDPM/image3.png type alt=image.png></p><p>x_{t-1} = (1 / âˆš(a_t)) * (x_t - (1 - a_t) / âˆš(1 - Î±Ì„_t) * ÏµÎ¸(x_t, t)) + Ïƒ_t * z</p><p><strong>è©³è¦‹ï¼šSampling éšæ®µ Denoise function åŒ–ç°¡</strong></p><ul><li><strong>åˆ†è§£ç†è§£</strong>ï¼š<ol><li>ÏµÎ¸(x_t, t)ï¼šNoise predicotr æ ¹æ“šç•¶å‰ t (å“ªä¸€éšæ®µ) ç”Ÿæˆå™ªè²</li><li>(x_t - (1 - a_t) / âˆš(1 - Î±Ì„_t) * ÏµÎ¸(x_t, t)ï¼šå¾ç•¶å‰æ•¸æ“šä¸­æ¸›å»é æ¸¬çš„å™ªè²éƒ¨åˆ†ã€‚<ol><li>x_t ä»£è¡¨çš„å‰‡æ˜¯ä¸Šä¸€éšæ®µçš„çµæœï¼Œå› æ­¤ = å³é‚Šæ˜¯x_{t-1} ï¼Œä¹Ÿå°±æ˜¯é€æ­¥ Sample åˆ° x0 ï¼ˆclean imageï¼‰ã€‚</li></ol></li><li>(1 / âˆš(a_t))ï¼šï¼ˆä¹˜è™Ÿå·¦é‚Šï¼‰èª¿æ•´ä¿¡è™Ÿå¹…åº¦ï¼Œä½¿å…¶å›åˆ°æ­£ç¢ºçš„åˆ†ä½ˆç¯„åœã€‚</li><li><ul><li>Ïƒ_t * zï¼šæ·»åŠ éš¨æ©Ÿå™ªè² ï¼Œ<strong>æ¨¡æ“¬åå‘éç¨‹çš„éš¨æ©Ÿæ€§</strong>ã€‚</li></ul></li></ol></li><li><strong>ç›®çš„</strong>ï¼šå¾ç•¶å‰çš„té‚„åŸåˆ°ä¸Šä¸€å€‹t ã€‚</li></ul><p><img loading=lazy src=/notes/241226/DDPM/image4.png type alt=image.png></p><hr><h3 id=ç¬¬äº”è¡Œ-è¿´åœˆçµæŸ><strong>ç¬¬äº”è¡Œ è¿´åœˆçµæŸ</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬äº”è¡Œ-è¿´åœˆçµæŸ>Â¶</a></h3><hr><h3 id=ç¬¬å…­è¡Œ-æœ€çµ‚è¼¸å‡º><strong>ç¬¬å…­è¡Œ æœ€çµ‚è¼¸å‡º</strong><a hidden class=anchor aria-hidden=true href=#ç¬¬å…­è¡Œ-æœ€çµ‚è¼¸å‡º>Â¶</a></h3><ul><li><strong>æ„ç¾©</strong>ï¼šç•¶è¿´åœˆçµæŸæ™‚ï¼Œè¼¸å‡ºæœ€å¾Œçš„çµæœ ï¼Œé€™å°±æ˜¯é‚„åŸå‡ºçš„æ¸…æ™°æ•¸æ“šï¼ˆå¦‚åœ–åƒï¼‰ã€‚<ul><li>x0 ä»£è¡¨ clean imageï¼Œå› æ­¤ return x0ã€‚</li></ul></li></ul><hr><h1 id=maximum-likelihood-estimation>Maximum Likelihood Estimation<a hidden class=anchor aria-hidden=true href=#maximum-likelihood-estimation>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image5.png type alt=image.png></p><p>MLE çš„ç›®çš„æ˜¯ç‚ºäº†è®“ PÎ¸ ç›¡å¯èƒ½çš„æ¥è¿‘æ–¼ Pdataã€‚</p><ul><li>PÎ¸(x)ï¼šmodel æ‰€ sample å‡ºçš„ distribution æ©Ÿç‡ã€‚</li><li>Pdata(x) : çœŸå¯¦ä¸–ç•Œçš„ datasetï¼Œå’Œ model çš„ network ç„¡é—œã€‚</li></ul><p><img loading=lazy src=/notes/241226/DDPM/image6.png type alt=image.png></p><p>å°‡æ¯ä¸€å€‹ sample å‡ºä¾†çš„ xi æ‹¿ pÎ¸ ç®—å‡ºæ©Ÿç‡ ä¸¦ç›¸ä¹˜ï¼Œç«Ÿå¯èƒ½æ‰¾å‡ºæœ€å¤§ Î¸ã€‚</p><p>æ‰€ä»¥æˆ‘å€‘è¦æ‰¾çš„ Î¸ å°±æ˜¯æ©Ÿç‡æœ€é«˜çš„é‚£ä¸€å€‹ï¼ˆLHY åœ¨æŠ•å½±ç‰‡ç”¨ Î¸* ä»£è¡¨ï¼‰ã€‚</p><blockquote><p>network çš„ç›®æ¨™æ˜¯å­¸ç¿’æ•¸æ“šçš„è¦å¾‹ï¼ˆçœŸå¯¦åˆ†ä½ˆğ‘(ğ‘¥0)q(x0)ï¼‰ï¼Œç„¶å¾Œæ¨¡æ“¬é€™äº›æ•¸æ“šçš„æ©Ÿç‡ï¼Œé€™å°±æ˜¯ğ‘ğœƒ(ğ‘¥0)pÎ¸(x0)ã€‚å®ƒä»£è¡¨æ¨¡å‹èªç‚ºæ•¸æ“šğ‘¥0x0æœ‰å¤šã€Œåˆç†ã€æˆ–ã€Œå¯èƒ½ã€ã€‚
*from chatgpt</p></blockquote><p><img loading=lazy src=/notes/241226/DDPM/image7.png type alt=image.png></p><p>å¾log ç›¸ä¹˜è½‰æ›æˆ ç›¸åŠ log ï¼Œç›¸åŠ  log é€™æ¨£æœƒè¿‘ä¼¼æ–¼ å¾ pdata å–å‡ºçš„ x ï¼Œç„¶å¾Œ pÎ¸ ç®—å‡ºæ©Ÿç‡ è¦è¶Šå¤§è¶Šå¥½ã€‚</p><p><img loading=lazy src=/notes/241226/DDPM/image8.png type alt=image.png></p><p>æ¥è‘—å¾ expectation è½‰æ›ç‚ºç©åˆ†ï¼Œç„¶å¾Œå¯ä»¥ç®—å‡ºå°±ç­‰åŒæ–¼ KL(Pdata||PÎ¸) ï¼Œæ‰€ä»¥æˆ‘å€‘è¦æ‰¾ minimun KLã€‚</p><p>è®“ ptheta è®“ pdataçš„å·®ç•°æœ€å°ã€‚</p><h1 id=vae-compute-pÎ¸>VAE: Compute pÎ¸<a hidden class=anchor aria-hidden=true href=#vae-compute-pÎ¸>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image9.png type alt=image.png></p><p>é€™é‚Šä¸»è¦æ˜¯åœ¨è¬›èªªï¼Œå› ç‚ºæˆ‘å€‘ä¸å¯èƒ½å»ç›´æ¥çœ‹ pÎ¸(x|z) ï¼Œå› ç‚ºä¸å¯èƒ½ sample å‡ºå®Œå…¨ä¸€æ¨¡ä¸€æ¨£çš„åœ–ï¼Œé€™æ¨£æœƒé€ æˆ pÎ¸(x|z) = 0ã€‚</p><p>å› æ­¤æˆ‘å€‘æ˜¯å»çœ‹ Mean of Gaussian (å»çœ‹è·é›¢ï¼Œä¹Ÿå°±æ˜¯ x å’Œ G(z)çš„è·é›¢)ã€‚</p><h1 id=vae-lower-bound-of>VAE: Lower bound of<a hidden class=anchor aria-hidden=true href=#vae-lower-bound-of>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image10.png type alt=image.png></p><ul><li>â‰¥ 0 æ˜¯å› ç‚º å®ƒå¯ä»¥çœ‹ä½œ KL divergence è€Œå®Œå…¨ä¸€æ¨£å°±ç‚º0ï¼Œå› æ­¤ â‰¥ 0ã€‚</li></ul><h1 id=ddpm-compute--pÎ¸x>DDPM: Compute pÎ¸(x)<a hidden class=anchor aria-hidden=true href=#ddpm-compute--pÎ¸x>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image11.png type alt=image.png></p><p><img loading=lazy src=/notes/241226/DDPM/image12.png type alt=image.png></p><p>åœ¨ç®— DDPM æ™‚ï¼Œå’Œ VAE ä¸åŒçš„æ˜¯ï¼Œ Maximize æœŸæœ›å€¼æ™‚ï¼ŒåŸå…ˆçš„ Encoder æ›¿æ›æˆ Diffusion Processï¼Œä¹Ÿå°±æ˜¯åœ¨åŠ  Noise çš„é‚£å€‹éšæ®µã€‚</p><p>å°‡å¼å­å±•é–‹å¾Œç‚ºä»¥ä¸‹ã€‚</p><p><img loading=lazy src=/notes/241226/DDPM/image13.png type alt=image.png></p><p>å¾ x1 ä¸€ç›´åšåˆ° X å¤§ T</p><h1 id=å–®å€‹-qxt--xt-1-ç®—æ³•>å–®å€‹ q(XT | XT-1) ç®—æ³•<a hidden class=anchor aria-hidden=true href=#å–®å€‹-qxt--xt-1-ç®—æ³•>Â¶</a></h1><p>æˆ‘å€‘é¦–å…ˆè¦å…ˆå®šç¾©ä¸€çµ„ <strong>Î²1 ~ Î²T</strong> ï¼Œé€™çµ„æ•¸å€¼ç‚ºè‡ªå®šç¾©çš„ï¼Œé¡ä¼¼ Learning rateï¼Œæœƒæ ¹æ“šä¿®æ”¹å½±éŸ¿ Networkã€‚ å› ç‚ºé€™æœƒå½±éŸ¿åœ¨æ¯ä¸€ t åŠ ä¸Šçš„å™ªè²</p><p>ï¼ˆä»¥ä¸‹ææ•™æˆæœ‰ç­†èª¤ï¼Œæ‡‰ç‚º Xt = âˆš1-Bt * Xt-1 + âˆšBt * noiseï¼‰</p><p><img loading=lazy src=/notes/241226/DDPM/image14.png type alt=image.png></p><h1 id=å¦‚æœè¦ç®—å‡º-qxt--x0>å¦‚æœè¦ç®—å‡º q(XT | X0)<a hidden class=anchor aria-hidden=true href=#å¦‚æœè¦ç®—å‡º-qxt--x0>Â¶</a></h1><p>å…¶å¯¦æ˜¯å¯ä»¥ä¸ç”¨ä¸€æ¬¡ä¸€æ¬¡å»æŠŠå®ƒç®—å‡ºä¾†ï¼ˆä¸ç”¨ä¸€æ­¥ä¸€æ­¥æŠŠå®ƒ+ä¸Šå™ªè²ï¼‰ã€‚</p><p>å¾ä¸‹æ–¹å¯ä»¥æ¨å°å‡º q(X2 | X0)</p><p><img loading=lazy src=/notes/241226/DDPM/image15.png type alt=image.png></p><p><img loading=lazy src=/notes/241226/DDPM/image16.png type alt=image.png></p><p><img loading=lazy src=/notes/241226/DDPM/image17.png type alt=image.png></p><p><img loading=lazy src=/notes/241226/DDPM/image18.png type alt=image.png></p><p>å› æ­¤ q(Xt | X0) å°±å¯ä»¥æ•´ç†æˆä¸Šåœ–ã€‚</p><h1 id=å™ªè²é æ¸¬>å™ªè²é æ¸¬<a hidden class=anchor aria-hidden=true href=#å™ªè²é æ¸¬>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image19.png type alt=image.png></p><p>å¾ä¸Šåœ–æ¨å°è‡³ä¸‹åœ–</p><p><img loading=lazy src=/notes/241226/DDPM/image20.png type alt=image.png></p><p>ç›®æ¨™å°±æ˜¯å»æœ€å¤§åŒ–ï¼Œè€Œç‚ºäº†æœ€å¤§åŒ–ï¼Œä¹Ÿå°±æ˜¯ç›¡å¯èƒ½åœ°å°‡ KL Divergence æœ€å°åŒ–ã€‚ï¼ˆçœ‹å¾Œé¢çš„ï¼šKL Divergence between å‘å‰ and å‘å¾Œï¼‰</p><p>ç®—å‡º KL Divergence å‘å‰ ğ‘ ( ğ‘¥ ğ‘¡ âˆ£ ğ‘¥ ğ‘¡ âˆ’ 1 ) q(x t âˆ£x tâˆ’1 ) èˆ‡å‘å¾Œ ğ‘ƒ ğœƒ ( ğ‘¥ ğ‘¡ âˆ£ ğ‘¥ ğ‘¡ âˆ’ 1 ) P Î¸ (x t âˆ£x tâˆ’1 ) çš„å·®ç•°ã€‚</p><p>$\sum_{t=2}^T E_{q\left(x_t \mid x_0\right)}\left[D_{K L}\left(q\left(x_{t-1} \mid x_t, x_0\right)|| p_\theta\left(x_{t-1} \mid x_t\right)\right]\right.$</p><h2 id=ç®—å‡ºä¸­é–“xt-1åˆ°xtçš„åˆ†ä½ˆ-qxt-1--xt-x0>ç®—å‡ºä¸­é–“xt-1åˆ°xtçš„åˆ†ä½ˆ q(Xt-1 | Xt, X0)<a hidden class=anchor aria-hidden=true href=#ç®—å‡ºä¸­é–“xt-1åˆ°xtçš„åˆ†ä½ˆ-qxt-1--xt-x0>Â¶</a></h2><p>å‰é¢æˆ‘å€‘å·²ç¶“è¬›éäº†ï¼Œå¦‚ä½•ç®—å‡ºå¾ X0 åˆ° Xtï¼Œä¹ŸçŸ¥é“è¦å¦‚ä½•ç®—å‡º xt-1 åˆ° xt-1 çš„åˆ†ä½ˆã€‚</p><p>æ¨å€’å…¬å¼å¦‚ä¸‹</p><p><img loading=lazy src=/notes/241226/DDPM/image21.png type alt=image.png></p><p><img loading=lazy src=/notes/241226/DDPM/image22.png type alt=image.png></p><h2 id=kl-divergence-between-å‘å‰-and-å‘å¾Œ>KL Divergence between å‘å‰ and å‘å¾Œ<a hidden class=anchor aria-hidden=true href=#kl-divergence-between-å‘å‰-and-å‘å¾Œ>Â¶</a></h2><p><img loading=lazy src=/notes/241226/DDPM/image23.png type alt=image.png></p><p>å› ç‚ºå‘å‰çš„ Mean æ˜¯ä¸å¯å‹•çš„ï¼Œæ‰€ä»¥æˆ‘å€‘å”¯ä¸€å¯å‹•çš„å°±æ˜¯ P(Xt-1|Xt) çš„ Mean ï¼Œä½¿å…©è€…é›¢ä¸­å¿ƒé»çš„è·é›¢æœ€å°ï¼Œé€™æ¨£ä¸€ä¾†ï¼Œå°±å¯ä»¥ä½¿å¾— KL Divergence ç›¡å¯èƒ½çš„å°ã€‚</p><p><img loading=lazy src=/notes/241226/DDPM/image24.png type alt=image.png></p><p>æ‰€ä»¥èªªä»¥ä¸Šåœ¨åšçš„äº‹æƒ…ä¹Ÿå°±æ˜¯è¨“ç·´ denoise function ï¼Œä½¿å¾—å®ƒå€‘å…©è€…è¶Šç›¸è¿‘è¶Šå¥½ã€‚</p><h1 id=sampling-éšæ®µ-denoise-function-åŒ–ç°¡>Sampling éšæ®µ Denoise function åŒ–ç°¡<a hidden class=anchor aria-hidden=true href=#sampling-éšæ®µ-denoise-function-åŒ–ç°¡>Â¶</a></h1><p><img loading=lazy src=/notes/241226/DDPM/image25.png type alt=image.png></p><p>åŸå…ˆå³ä¸Šè§’çš„å¼å­çš„ x0 å¯ä»¥æ ¹æ“šæˆ‘å€‘ä¸Šé¢å·²ç¶“å¯«å¥½é—œæ–¼ x0 å’Œ xt çš„é—œä¿‚ï¼Œåœ¨å¸¶å›å»åŒ–ç°¡ã€‚</p><p>è€Œé€™é‚Šä¹Ÿå°±å›åˆ° Algorithm Sampling éšæ®µçš„ç¬¬å››è¡Œã€‚</p><h3 id=ref>Ref<a hidden class=anchor aria-hidden=true href=#ref>Â¶</a></h3><p><a href=https://www.cvmart.net/community/detail/7942>æ·±å…¥æµ…å‡ºæ‰©æ•£æ¨¡å‹(Diffusion Model)ç³»åˆ—ï¼šåŸºçŸ³DDPMï¼ˆäººäººéƒ½èƒ½çœ‹æ‡‚çš„æ•°å­¦åŸç†ç¯‡ï¼‰</a></p><p><a href="https://youtube.com/playlist?list=PLJV_el3uVTsNi7PgekEUFsyVllAJXRsP-&amp;si=_y39Uu28junvh9re">æå¼˜æ¯… DDPM</a></p></div><footer class=post-footer><nav class=paginav><a class=next href=https://jabeehugo.netlify.app/notes/241224-2/><span class=title>Next Page&nbsp;<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>ç›®å‰çœ‹åˆ°æœ€å²å®³çš„å¸‚ç«‹åœ–æ›¸é¤¨-æ¡ƒåœ’åœ–æ›¸é¤¨ç¸½é¤¨</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Responsive Heatmap</title><style>.heatmap-container{display:block}:root{--heatmap-bgBorder-light:#f5f5f5;--heatmap-bg-light:#eaedf0;--heatmap-colors-light-0:#c6e48b;--heatmap-colors-light-1:#7bc96f;--heatmap-colors-light-2:#239a3b;--heatmap-colors-light-3:#196127;--tooltip-bg-light:#fff;--tooltip-textstyle-light:#1c1a1b;--heatmap-bgBorder-dark:#1d1e20;--heatmap-bg-dark:#585c59;--heatmap-colors-dark-0:#c6e48b;--heatmap-colors-dark-1:#7bc96f;--heatmap-colors-dark-2:#239a3b;--heatmap-colors-dark-3:#196127;--tooltip-bg-dark:#585c59;--tooltip-textstyle-dark:#fff}</style></head><body><div classname=heatmap-container><div><div id=heatmap style=max-width:800px;height:200px;padding:2px;text-align:center></div></div></div><script src=https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js></script><script type=text/javascript>var option,dataMap,key,value,wordCount,link,title,allSum,postSum,data,sum,startDate,year_Mill,endDate,dayTime,chartDom=document.getElementById("heatmap"),myChart=echarts.init(chartDom);window.onresize=function(){myChart.resize()};function getCurrentTheme(){return document.body.classList.contains("dark")?"dark":"light"}function getThemeColors(){return"dark"===getCurrentTheme()?[getCSSVariableValue("--heatmap-colors-dark-0"),getCSSVariableValue("--heatmap-colors-dark-1"),getCSSVariableValue("--heatmap-colors-dark-2"),getCSSVariableValue("--heatmap-colors-dark-3")]:[getCSSVariableValue("--heatmap-colors-light-0"),getCSSVariableValue("--heatmap-colors-light-1"),getCSSVariableValue("--heatmap-colors-light-2"),getCSSVariableValue("--heatmap-colors-light-3")]}function getThemeBgColor(){const e=getCurrentTheme();return getCSSVariableValue(e==="dark"?"--heatmap-bg-dark":"--heatmap-bg-light")}function getThemeBgBorderColor(){const e=getCurrentTheme();return getCSSVariableValue(e==="dark"?"--heatmap-bgBorder-dark":"--heatmap-bgBorder-light")}function getTooltipBgColor(){const e=getCurrentTheme();return getCSSVariableValue(e==="dark"?"--tooltip-bg-dark":"--tooltip-bg-light")}function getTextStyleColor(){const e=getCurrentTheme();return getCSSVariableValue(e==="dark"?"--tooltip-textstyle-dark":"--tooltip-textstyle-light")}function getCSSVariableValue(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()}function initOrUpdateChart(){myChart&&myChart.dispose();const t=getCurrentTheme(),e=document.getElementById("heatmap");myChart=echarts.init(e),option.calendar.itemStyle.color=getThemeBgColor(),option.calendar.itemStyle.borderColor=getThemeBgBorderColor(),option.tooltip.backgroundColor=getTooltipBgColor(),option.tooltip.textStyle.color=getTextStyleColor(),myChart.setOption(option)}const observer=new MutationObserver(e=>{e.forEach(e=>{e.type==="attributes"&&e.attributeName==="class"&&initOrUpdateChart()})});observer.observe(document.body,{attributes:!0,attributeFilter:["class"]}),dataMap=new Map,key="2024-12-28",value=dataMap.get(key),wordCount=105,link="/posts/241228/",title="ä»Šå¤©çœŸçš„æœ‰å†·èª’",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-22",value=dataMap.get(key),wordCount=300,link="/posts/241222/",title="ç¬¬ä¸€æ¬¡å­¸æœƒé¨è…³è¸è»Šçš„è¨˜æ†¶æå¦‚æ˜¨æ—¥",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-21",value=dataMap.get(key),wordCount=864,link="/posts/241221/",title="ä¸­åŸçš„è–èª•ç¯€ï¼Œå¤©ç©ºä¸ä¸‹é›ªï¼",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-14",value=dataMap.get(key),wordCount=982,link="/posts/241214/",title="å–§é¬§ä¸­çš„å®‰æ­‡ä¹‹è™•",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-12",value=dataMap.get(key),wordCount=410,link="/posts/241212/",title="è¿‘æ³åˆ†äº«ï¼šç‚ºä»€éº¼é€™éº¼ä¹…æ²’æ›´æ–°ï¼Ÿ",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-23",value=dataMap.get(key),wordCount=301,link="/posts/241123/",title="ä»–ä¸è¦è›‹ï¼Œå¹«ä»–æ”¹èµ·å¸ï¼",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-21",value=dataMap.get(key),wordCount=687,link="/posts/241121-2/",title="ç‚ºä»€éº¼æˆ‘æŠŠthreadsåˆªäº†",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-16",value=dataMap.get(key),wordCount=651,link="/posts/241116/",title="æˆ‘ç‚ºä»€éº¼ä¸å¤ªåµæ¶ && åŸä¾†å…©å€‹äººäº’è£œæ˜¯å¦‚æ­¤çš„é‡è¦",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="0001-01-01",value=dataMap.get(key),wordCount=0,link="/posts/archives/",title="Posts Archives",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-26",value=dataMap.get(key),wordCount=2135,link="/notes/241226/",title="DDPM paper notes",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-24",value=dataMap.get(key),wordCount=1023,link="/notes/241224-2/",title="ç›®å‰çœ‹åˆ°æœ€å²å®³çš„å¸‚ç«‹åœ–æ›¸é¤¨-æ¡ƒåœ’åœ–æ›¸é¤¨ç¸½é¤¨",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-24",value=dataMap.get(key),wordCount=453,link="/notes/241224/",title="Mac OS ç„¡æ³•é€£ä¸Šå…¬å…±ç¶²è·¯çš„è§£æ±ºæ–¹æ³•",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-23",value=dataMap.get(key),wordCount=2486,link="/notes/241223/",title="2024 Recap",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-21",value=dataMap.get(key),wordCount=338,link="/notes/241221/",title="æ–°è©© && æ”å½± æ¯”è³½åˆ†äº«",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-18",value=dataMap.get(key),wordCount=405,link="/notes/241218/",title="è§£æ±º Pop OS çš„æ‰‹å‹¢æåˆ && Scaling çš„å•é¡Œ",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-15",value=dataMap.get(key),wordCount=955,link="/notes/241215/",title="åˆ†äº«ï¼šJeremy Lin's battle against anxiety æ—æ›¸è±ªè«‡è³½å‰ç„¦æ…®",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-12-14",value=dataMap.get(key),wordCount=564,link="/notes/241214/",title="æˆ‘å¹³å¸¸æœƒçœ‹çš„ç¶²ç´…",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-22",value=dataMap.get(key),wordCount=2560,link="/notes/241122/",title="æˆ‘æ„›é¨é‡æ©Ÿï¼Œä½†ä¸æ„›é¨é‡æ©Ÿï¼›é‡æ©Ÿæ˜¯ç©å…·ï¼Œä¸æ˜¯äº¤é€šå·¥å…·",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-21",value=dataMap.get(key),wordCount=498,link="/notes/241121/",title="æˆ‘å¹³å¸¸æœƒä½¿ç”¨çš„æ‡‰ç”¨ç¨‹å¼",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-19",value=dataMap.get(key),wordCount=936,link="/notes/241119/",title="åµå¾—æ²¸æ²¸æšæšçš„ Mac mini M4 é–‹æ©ŸæŒ‰éµ",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="2024-11-14",value=dataMap.get(key),wordCount=1256,link="/notes/241114/",title="æ¥µé™22å°æ™‚å¿«é–ƒå°å—ä¹‹æ—…-å°±æ˜¯åƒåƒå–å–",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),key="0001-01-01",value=dataMap.get(key),wordCount=0,link="/notes/archives/",title="Notes Archives",value==null?dataMap.set(key,[{wordCount,link,title}]):value.push({wordCount,link,title}),allSum=0,postSum=0,data=[];for(const[e,t]of dataMap.entries()){sum=0;for(const e of t)sum+=e.wordCount,postSum=postSum+1;allSum=sum+allSum,data.push([e,(sum/1e3).toFixed(1)])}startDate=new Date,year_Mill=startDate.setFullYear(startDate.getFullYear()-1),startDate=+new Date(year_Mill),endDate=+new Date,dayTime=3600*24*1e3,startDate=echarts.format.formatTime("yyyy-MM-dd",startDate),endDate=echarts.format.formatTime("yyyy-MM-dd",endDate);function heatmap_width(e){var t=new Date,o=t.setMonth(t.getMonth()-e),n=+new Date,t=+new Date(o),n=echarts.format.formatTime("yyyy-MM-dd",n),t=echarts.format.formatTime("yyyy-MM-dd",t),s=[];return s.push([t,n]),s}function getRangeArr(){const e=window.innerWidth;return e>=600?heatmap_width(12):heatmap_width(e>=400?9:6)}const textContent=`ç¸½å­—æ•¸ï¼š${allSum}  æ–‡ç« ç¸½ç¯‡æ•¸ï¼š${postSum-2}`;option={title:{top:0,left:"center",text:textContent,textStyle:{color:"#8a8888"}},tooltip:{hideDelay:1e3,enterable:!0,textStyle:{color:getTextStyleColor()},backgroundColor:getTooltipBgColor(),formatter:function(e){const n=e.data[0],a=dataMap.get(n);var s,o,i,t=`${n}`;for(const[n,e]of a.entries())t+="<br>",s=e.link,o=e.title,i=(e.wordCount/1e3).toFixed(1),t+=`<a href="${s}" target="_blank">${o} | ${i} åƒå­—</a>`;return t}},visualMap:{type:"piecewise",orient:"horizontal",left:"center",top:30,pieces:[{min:0,max:.5,label:"0-0.5",color:"#9e9ac8"},{min:.5,max:1,label:"0.5-1",color:"#807dba"},{min:1,max:2,label:"1-2",color:"#6a51a3"},{min:2,max:999,label:"2-âˆ",color:"#4a1486"}],text:["åƒå­—",""],textStyle:{color:"#8a8888"},showLabel:!0,itemGap:20},calendar:{top:80,left:20,right:4,cellSize:["auto",12],range:getRangeArr(),itemStyle:{color:getThemeBgColor(),borderWidth:2.5,borderColor:getThemeBgBorderColor()},yearLabel:{show:!1},splitLine:{lineStyle:{color:"rgba(0, 0, 0, 0.0)"}},dayLabel:{textStyle:{color:"#8a8888"}},monthLabel:{textStyle:{color:"#8a8888"}}},series:{type:"heatmap",coordinateSystem:"calendar",data}},myChart.setOption(option),myChart.on("click",function(e){if(e.componentType==="series"){const t=dataMap.get(e.data[0])[0],n=window.location.origin+t.link;window.open(n,"_blank").focus()}}),initOrUpdateChart()</script></body><span>&copy; 2024 <a href=https://jabeehugo.netlify.app/>Jabee's Blog</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script><script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script>mediumZoom(".entry-cover img"),mediumZoom(".post-content img:not([no-zoom])")</script></body></html>